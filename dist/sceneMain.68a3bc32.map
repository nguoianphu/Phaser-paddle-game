{"version":3,"sources":["js/scenes/sceneMain.js"],"names":["SceneMain","load","spritesheet","frameWidth","frameHeight","image","emitter","Phaser","Events","EventEmitter","controller","Controller","mediaManager","MediaManager","scene","sb","SoundButtons","velocity","centerX","game","config","width","centerY","height","quarter","pMove","bar","add","displayWidth","displayHeight","ball","physics","sprite","Align","scaleToGameW","paddle1","pScale","scaleX","paddle2","scoreBox","ScoreBox","aGrid","AlignGrid","rows","cols","placeAtIndex","setBallColor","setVelocity","setImmovable","collider","ballHit","input","on","changePaddle","onUp","pointer","diffY","Math","abs","y","downY","console","log","tweens","targets","duration","paddle","onComplete","onCompleteHandler","onCompleteParams","scope","tween","custom","color","frame","name","setFrame","r","floor","random","targetY","Scene"],"mappings":"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","file":"sceneMain.68a3bc32.map","sourceRoot":"..","sourcesContent":["class SceneMain extends Phaser.Scene {\r\n  constructor() {\r\n    super(\"SceneMain\");\r\n  }\r\n  preload() {\r\n    //load our images or sounds\r\n    this.load.spritesheet(\"balls\", \"images/balls.png\", {\r\n      frameWidth: 100,\r\n      frameHeight: 100\r\n    });\r\n    this.load.spritesheet(\"paddles\", \"images/paddles.png\", {\r\n      frameWidth: 400,\r\n      frameHeight: 50\r\n    });\r\n    this.load.image(\"bar\", \"images/bar.jpg\");\r\n  }\r\n  create() {\r\n    //define our objects\r\n    //set up\r\n    emitter = new Phaser.Events.EventEmitter();\r\n    controller = new Controller();\r\n    let mediaManager = new MediaManager({ scene: this });\r\n\r\n    let sb = new SoundButtons({ scene: this });\r\n\r\n    this.velocity = 100;\r\n    this.centerX = game.config.width / 2;\r\n    this.centerY = game.config.height / 2;\r\n    this.quarter = game.config.height / 4;\r\n    this.pMove = game.config.height / 32;\r\n\r\n    this.bar = this.add.image(this.centerX, this.centerY, \"bar\");\r\n    this.bar.displayWidth = game.config.width / 3;\r\n    this.bar.displayHeight = game.config.height;\r\n\r\n    this.ball = this.physics.add.sprite(this.centerX, this.centerY, \"balls\");\r\n    Align.scaleToGameW(this.ball, 0.05);\r\n    //\r\n    //\r\n    //\r\n    this.paddle1 = this.physics.add.sprite(\r\n      this.centerX,\r\n      this.quarter,\r\n      \"paddles\"\r\n    );\r\n    Align.scaleToGameW(this.paddle1, 0.25);\r\n    this.pScale = this.paddle1.scaleX;\r\n    //\r\n    //\r\n    //\r\n    this.paddle2 = this.physics.add.sprite(\r\n      this.centerX,\r\n      this.quarter * 3,\r\n      \"paddles\"\r\n    );\r\n    Align.scaleToGameW(this.paddle2, 0.25);\r\n    //\r\n    //\r\n    //\r\n    var scoreBox = new ScoreBox({ scene: this });\r\n    this.aGrid = new AlignGrid({scene: this, rows:11,cols:11});\r\n    this.aGrid.placeAtIndex(5, scoreBox);\r\n    // this.aGrid.showNumbers();\r\n    //\r\n    //\r\n    //\r\n    this.setBallColor();\r\n    this.ball.setVelocity(0, this.velocity);\r\n    this.paddle1.setImmovable();\r\n    this.paddle2.setImmovable();\r\n    this.physics.add.collider(\r\n      this.ball,\r\n      this.paddle1,\r\n      this.ballHit,\r\n      null,\r\n      this\r\n    );\r\n    this.physics.add.collider(\r\n      this.ball,\r\n      this.paddle2,\r\n      this.ballHit,\r\n      null,\r\n      this\r\n    );\r\n    this.input.on(\"pointerdown\", this.changePaddle, this);\r\n    this.input.on(\"pointerup\", this.onUp, this);\r\n  }\r\n\r\n  onUp(pointer) {\r\n    let diffY = Math.abs(pointer.y - this.downY);\r\n    console.log(diffY);\r\n    if (diffY > 300) {\r\n      this.tweens.add({\r\n        targets: this.paddle1,\r\n        duration: 1000,\r\n        y: this.quarter\r\n      });\r\n      this.tweens.add({\r\n        targets: this.paddle2,\r\n        duration: 1000,\r\n        y: this.quarter * 3\r\n      });\r\n    }\r\n  }\r\n\r\n  changePaddle(pointer) {\r\n    let paddle = this.velocity > 0 ? this.paddle2 : this.paddle1;\r\n    this.tweens.add({\r\n      targets: paddle,\r\n      duration: 500,\r\n      scaleX: 0,\r\n      onComplete: this.onCompleteHandler,\r\n      onCompleteParams: [{ scope: this, paddle: paddle }]\r\n    });\r\n\r\n    this.downY = pointer.y;\r\n  }\r\n\r\n  onCompleteHandler(tween, targets, custom) {\r\n    let paddle = custom.paddle;\r\n    paddle.scaleX = custom.scope.pScale;\r\n    let color = paddle.frame.name == 1 ? 0 : 1;\r\n    paddle.setFrame(color);\r\n\r\n  }\r\n\r\n  setBallColor() {\r\n    let r = Math.floor(Math.random() * 100);\r\n    if (r < 50) {\r\n      this.ball.setFrame(0);\r\n    } else {\r\n      this.ball.setFrame(1);\r\n    }\r\n  }\r\n\r\n  ballHit(ball, paddle) {\r\n    this.velocity = -this.velocity;\r\n    this.setBallColor();\r\n    ball.setVelocity(0, this.velocity);\r\n    let targetY = 0;\r\n\r\n    if (paddle.y > this.centerY) {\r\n      targetY = paddle.y - this.pMove;\r\n    } else {\r\n      targetY = paddle.y + this.pMove;\r\n    }\r\n    this.tweens.add({ targets: paddle, duration: 1000, y: targetY });\r\n  }\r\n\r\n  update() {\r\n    //constant running loop\r\n  }\r\n}\r\n"]}