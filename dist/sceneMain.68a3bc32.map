{"version":3,"sources":["js/scenes/sceneMain.js"],"names":["SceneMain","emitter","Phaser","Events","EventEmitter","controller","Controller","model","score","mediaManager","MediaManager","scene","sb","SoundButtons","velocity","centerX","game","config","width","centerY","height","quarter","pMove","bar","add","image","displayWidth","displayHeight","ball","physics","sprite","Align","scaleToGameW","paddle1","pScale","scaleX","paddle2","scoreBox","ScoreBox","aGrid","AlignGrid","rows","cols","placeAtIndex","setBallColor","setVelocity","setImmovable","collider","ballHit","input","on","changePaddle","onUp","pointer","diffY","Math","abs","y","downY","console","log","tweens","targets","duration","paddle","onComplete","onCompleteHandler","onCompleteParams","scope","emit","G","PLAY_SOUND","tween","custom","color","frame","name","setFrame","r","floor","random","start","distY","points","UP_POINTS","time","addEvent","delay","callback","doOver","callbackScope","loop","targetY","Scene"],"mappings":"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","file":"sceneMain.68a3bc32.map","sourceRoot":"..","sourcesContent":["class SceneMain extends Phaser.Scene {\r\n  constructor() {\r\n    super(\"SceneMain\");\r\n  }\r\n  preload() {\r\n\r\n  }\r\n  create() {\r\n    //define our objects\r\n    //set up\r\n    emitter = new Phaser.Events.EventEmitter();\r\n    controller = new Controller();\r\n    model.score = 0;\r\n    let mediaManager = new MediaManager({ scene: this });\r\n\r\n    let sb = new SoundButtons({ scene: this });\r\n\r\n    this.velocity = 100;\r\n    this.centerX = game.config.width / 2;\r\n    this.centerY = game.config.height / 2;\r\n    this.quarter = game.config.height / 4;\r\n    this.pMove = game.config.height / 32;\r\n\r\n    this.bar = this.add.image(this.centerX, this.centerY, \"bar\");\r\n    this.bar.displayWidth = game.config.width / 3;\r\n    this.bar.displayHeight = game.config.height;\r\n\r\n    this.ball = this.physics.add.sprite(this.centerX, this.centerY, \"balls\");\r\n    Align.scaleToGameW(this.ball, 0.05);\r\n    //\r\n    //\r\n    //\r\n    this.paddle1 = this.physics.add.sprite(\r\n      this.centerX,\r\n      this.quarter,\r\n      \"paddles\"\r\n    );\r\n    Align.scaleToGameW(this.paddle1, 0.25);\r\n    this.pScale = this.paddle1.scaleX;\r\n    //\r\n    //\r\n    //\r\n    this.paddle2 = this.physics.add.sprite(\r\n      this.centerX,\r\n      this.quarter * 3,\r\n      \"paddles\"\r\n    );\r\n    Align.scaleToGameW(this.paddle2, 0.25);\r\n    //\r\n    //\r\n    //\r\n    var scoreBox = new ScoreBox({ scene: this });\r\n    this.aGrid = new AlignGrid({ scene: this, rows: 11, cols: 11 });\r\n    this.aGrid.placeAtIndex(5, scoreBox);\r\n    // this.aGrid.showNumbers();\r\n    //\r\n    //\r\n    //\r\n    this.setBallColor();\r\n    this.ball.setVelocity(0, this.velocity);\r\n    this.paddle1.setImmovable();\r\n    this.paddle2.setImmovable();\r\n    this.physics.add.collider(\r\n      this.ball,\r\n      this.paddle1,\r\n      this.ballHit,\r\n      null,\r\n      this\r\n    );\r\n    this.physics.add.collider(\r\n      this.ball,\r\n      this.paddle2,\r\n      this.ballHit,\r\n      null,\r\n      this\r\n    );\r\n    this.input.on(\"pointerdown\", this.changePaddle, this);\r\n    this.input.on(\"pointerup\", this.onUp, this);\r\n  }\r\n\r\n  onUp(pointer) {\r\n    let diffY = Math.abs(pointer.y - this.downY);\r\n    console.log(diffY);\r\n    if (diffY > 300) {\r\n      this.tweens.add({\r\n        targets: this.paddle1,\r\n        duration: 1000,\r\n        y: this.quarter\r\n      });\r\n      this.tweens.add({\r\n        targets: this.paddle2,\r\n        duration: 1000,\r\n        y: this.quarter * 3\r\n      });\r\n    }\r\n  }\r\n\r\n  changePaddle(pointer) {\r\n    let paddle = this.velocity > 0 ? this.paddle2 : this.paddle1;\r\n    this.tweens.add({\r\n      targets: paddle,\r\n      duration: 500,\r\n      scaleX: 0,\r\n      onComplete: this.onCompleteHandler,\r\n      onCompleteParams: [{ scope: this, paddle: paddle }]\r\n    });\r\n\r\n    this.downY = pointer.y;\r\n    emitter.emit(G.PLAY_SOUND, \"flip\");\r\n  }\r\n\r\n  onCompleteHandler(tween, targets, custom) {\r\n    let paddle = custom.paddle;\r\n    paddle.scaleX = custom.scope.pScale;\r\n    let color = paddle.frame.name == 1 ? 0 : 1;\r\n    paddle.setFrame(color);\r\n  }\r\n\r\n  setBallColor() {\r\n    let r = Math.floor(Math.random() * 100);\r\n    if (r < 50) {\r\n      this.ball.setFrame(0);\r\n    } else {\r\n      this.ball.setFrame(1);\r\n    }\r\n  }\r\n\r\n  doOver() {\r\n    this.scene.start(\"SceneOver\");\r\n  }\r\n\r\n  ballHit(ball, paddle) {\r\n    this.velocity = -this.velocity;\r\n    this.velocity *= 1.01;\r\n    emitter.emit(G.PLAY_SOUND, \"hit\");\r\n\r\n    var distY = Math.abs(this.paddle1.y - this.paddle2.y);\r\n    if (ball.frame.name === paddle.frame.name) {\r\n      var points = 1;\r\n\r\n      if (distY < game.config.height / 3) {\r\n        points = 2;\r\n      }\r\n      if (distY < game.config.height / 4) {\r\n        points = 3;\r\n      }\r\n      emitter.emit(G.UP_POINTS, points);\r\n    } else {\r\n      emitter.emit(G.PLAY_SOUND, \"lose\");\r\n      this.time.addEvent({\r\n        delay: 1000,\r\n        callback: this.doOver,\r\n        callbackScope: this,\r\n        loop: false\r\n      });\r\n      return;\r\n    }\r\n    this.setBallColor();\r\n    ball.setVelocity(0, this.velocity);\r\n    let targetY = 0;\r\n    if (distY > game.config.height / 5) {\r\n      if (paddle.y > this.centerY) {\r\n        targetY = paddle.y - this.pMove;\r\n      } else {\r\n        targetY = paddle.y + this.pMove;\r\n      }\r\n      this.tweens.add({ targets: paddle, duration: 1000, y: targetY });\r\n    }\r\n  }\r\n\r\n  update() {\r\n    //constant running loop\r\n  }\r\n}\r\n"]}